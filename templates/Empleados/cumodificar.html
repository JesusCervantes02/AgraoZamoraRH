{% extends "comunes/base.html" %}
{% block principal %}

<h1 class="encabezado_general">Mi Perfil</h1>

<div class="botones_previos">
    <a class="botones_formularios botonAtras" href="/index">
        <img src="{{url_for('static', filename='imagenes/Regresar.png')}}" alt="">
        Regresar</a>
</div>

<div class="foto-formulario foto_empleados"></div>
<form class="formulario" action="/actualizardatos" enctype="multipart/form-data" method="post">

    <ul class="nav nav-tabs pagform" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#home">Información Personal
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="28"
                        height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <circle cx="12" cy="7" r="4" />
                        <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                    </svg>
                </span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#menu1">Información de domicilio
                <span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-map-2" width="28"
                        height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <line x1="18" y1="6" x2="18" y2="6.01" />
                        <path d="M18 13l-3.5 -5a4 4 0 1 1 7 0l-3.5 5" />
                        <polyline points="10.5 4.75 9 4 3 7 3 20 9 17 15 20 21 17 21 15" />
                        <line x1="9" y1="4" x2="9" y2="17" />
                        <line x1="15" y1="15" x2="15" y2="20" />
                    </svg>
                </span>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#menu2">Información escolar
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-school" width="28"
                    height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M22 9l-10 -4l-10 4l10 4l10 -4v6" />
                    <path d="M6 10.6v5.4a6 3 0 0 0 12 0v-5.4" />
                </svg>
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#menu3">Información laboral
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-briefcase" width="28"
                    height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <rect x="3" y="7" width="18" height="13" rx="2" />
                    <path d="M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2" />
                    <line x1="12" y1="12" x2="12" y2="12.01" />
                    <path d="M3 13a20 20 0 0 0 18 0" />
                </svg>
            </a>
        </li>
    </ul>

    <div class="tab-content">
        <fieldset id="home" class="container tab-pane active">
            <h4>Infomación Personal</h4>

            <div class="contenedor-campos">
                <div class="campo">
                    <label class="campo_label" for="idEmpleado">idEmpleado:</label>
                    <input class="campo_field" type="number" placeholder="idEmpleado" name="idEmpleado" readonly
                        value="{{current_user.idEmpleado}}">
                </div>
                <div class="campo">
                    <label class="campo_label" for="nombre">Nombre:</label>
                    <input class="campo_field" type="text" placeholder="Nombre" name="nombre" required maxlength="30"
                        value="{{current_user.nombre}}" disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="apellidoPaterno">Apellido paterno:</label>
                    <input class="campo_field" type="text" placeholder="Apellido paterno" name="apellidoPaterno"
                        required maxlength="30" value="{{current_user.apellidoPaterno}}" disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="apellidoMaterno">Apellido materno:</label>
                    <input class="campo_field" type="text" placeholder="Apellido materno" name="apellidoMaterno"
                        required maxlength="30" value="{{current_user.apellidoMaterno}}" disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="sexo">Sexo:</label>
                    <select disabled class="campo_field" name="sexo" required>

                        {%if current_user.sexo=='H'%}
                        <option selected value="{{current_user.sexo}}">Hombre</option>
                        <option value="M">Mujer</option>
                        {%endif%}

                        {%if current_user.sexo=='M'%}
                        <option selected value="{{current_user.sexo}}">Mujer</option>
                        <option value="H">Hombre</option>
                        {%endif%}
                    </select>
                </div>

                <div class="campo">
                    <label class="campo_label" for="fechaNacimiento">Fecha de nacimiento:</label>
                    <input class="campo_field" type="date" placeholder="Fecha de nacimiento" name="fechaNacimiento"
                        required value="{{current_user.fechaNacimiento}}" disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="curp">CURP:</label>
                    <input class="campo_field" type="text" placeholder="CURP" name="curp" required maxlength="18"
                        value="{{current_user.curp}}"
                        pattern="[A-Z][A-Z][A-Z][A-Z][0-9][0-9][0-9][0-9][0-9][0-9][A-Z][A-Z][A-Z][A-Z][A-Z][[0-9A-Z]][0-9]"
                        disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="estadoCivil">Estado civil:</label>
                    <select class="campo_field" name="estadoCivil" required>

                        {%if current_user.estadoCivil=='Soltero(a)'%}
                        <option selected value="{{current_user.estadoCivil}}">{{current_user.estadoCivil}}</option>
                        <option value="Casado(a)">Casado(a)</option>
                        <option value="Divorciado(a)">Divorciado(a)</option>
                        <option value="Separado(a)">Separado(a)</option>
                        <option value="Unión libre">Unión libre</option>
                        <option value="Viudo(a)">Viudo(a)</option>
                        <option value="Concubinato">Concubinato</option>
                        {%endif%}
                        {%if current_user.estadoCivil=='Casado(a)'%}
                        <option selected value="{{current_user.estadoCivil}}">{{current_user.estadoCivil}}</option>
                        <option value="Soltero(a)">Soltero(a)</option>
                        <option value="Divorciado(a)">Divorciado(a)</option>
                        <option value="Separado(a)">Separado(a)</option>
                        <option value="Unión libre">Unión libre</option>
                        <option value="Viudo(a)">Viudo(a)</option>
                        <option value="Concubinato">Concubinato</option>
                        {%endif%}

                        {%if current_user.estadoCivil=='Divorciado(a)'%}
                        <option selected value="{{current_user.estadoCivil}}">{{current_user.estadoCivil}}</option>
                        <option value="Soltero(a)">Soltero(a)</option>
                        <option value="Casado(a)">Casado(a)</option>
                        <option value="Separado(a)">Separado(a)</option>
                        <option value="Unión libre">Unión libre</option>
                        <option value="Viudo(a)">Viudo(a)</option>
                        <option value="Concubinato">Concubinato</option>
                        {%endif%}

                        {%if current_user.estadoCivil=='Separado(a)'%}
                        <option selected value="{{current_user.estadoCivil}}">{{current_user.estadoCivil}}</option>
                        <option value="Soltero(a)">Soltero(a)</option>
                        <option value="Casado(a)">Casado(a)</option>
                        <option value="Divorciado(a)">Divorciado(a)</option>
                        <option value="Unión libre">Unión libre</option>
                        <option value="Viudo(a)">Viudo(a)</option>
                        <option value="Concubinato">Concubinato</option>
                        {%endif%}


                        {%if current_user.estadoCivil=='Unión libre'%}
                        <option selected value="{{current_user.estadoCivil}}">{{current_user.estadoCivil}}</option>
                        <option value="Soltero(a)">Soltero(a)</option>
                        <option value="Casado(a)">Casado(a)</option>
                        <option value="Divorciado(a)">Divorciado(a)</option>
                        <option value="Separado(a)">Separado(a)</option>
                        <option value="Viudo(a)">Viudo(a)</option>
                        <option value="Concubinato">Concubinato</option>
                        {%endif%}

                        {%if current_user.estadoCivil=='Viudo(a)'%}
                        <option selected value="{{current_user.estadoCivil}}">{{current_user.estadoCivil}}</option>
                        <option value="Soltero(a)">Soltero(a)</option>
                        <option value="Casado(a)">Casado(a)</option>
                        <option value="Divorciado(a)">Divorciado(a)</option>
                        <option value="Separado(a)">Separado(a)</option>
                        <option value="Unión libre">Unión libre</option>
                        <option value="Concubinato">Concubinato</option>
                        {%endif%}

                        {%if current_user.estadoCivil=='Concubinato'%}
                        <option selected value="{{current_user.estadoCivil}}">{{current_user.estadoCivil}}</option>
                        <option value="Soltero(a)">Soltero(a)</option>
                        <option value="Casado(a)">Casado(a)</option>
                        <option value="Divorciado(a)">Divorciado(a)</option>
                        <option value="Separado(a)">Separado(a)</option>
                        <option value="Unión libre">Unión libre</option>
                        <option value="Viudo(a)">Viudo(a)</option>
                        {%endif%}

                    </select>
                </div>


                <div class="campo">
                    <label class="campo_label" for="telefono">Teléfono:</label>
                    <input class="campo_field" type="tel" placeholder="Teléfono" name="telefono" required maxlength="12"
                        pattern="[0-9][0-9][0-9]-[0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]"
                        value="{{current_user.telefono}}">
                </div>

                <div class="campo">
                    <label class="campo_label" for="email">Email:</label>
                    <input class="campo_field" type="email" placeholder="Email" name="email" required maxlength="100"
                        value="{{current_user.email}}">
                </div>

                <div class="campo">
                    <label class="campo_label" for="password">Password:</label>
                    <input class="campo_field" type="password" placeholder="Password" name="password" required
                        value="{{current_user.password}}" maxlength="20" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                        title="Debe contener al menos 8 caracteres entre ellos una letra mayuscula, una minúscula, un caracter especial y un caracter numérico"
                        id="password">
                    <input type="checkbox" id="ver" onclick="verPassword()" style="margin:5px"><span
                        class="glyphicon glyphicon-eye-close"></span> Ver Contraseña
                </div>

                <div class="campo">
                    <label class="campo_label" for="password">Foto:</label>
                    <input class="campo_field" type="file" placeholder="Foto" name="fotografia" accept="image/*">
                    <a data-toggle="modal" data-target="#imagen" class="btn btn-info btn-lg"> Visualizar
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                            class="bi bi-eye-fill" viewBox="0 0 16 16">
                            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z" />
                            <path
                                d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" />
                        </svg>
                    </a>
                </div>

            </div>
        </fieldset>

        <fieldset id="menu1" class="container tab-pane fade">
            <h4>Información del domicilio</h4>
            <div class="contenedor-campos">
                <div class="campo">
                    <label class="campo_label" for="direccion">Dirección:</label>
                    <input class="campo_field" type="text" placeholder="Dirección" name="direccion" required
                        maxlength="80" value="{{current_user.direccion}}">
                </div>

                <div class="campo">
                    <label class="campo_label" for="colonia">Colonia:</label>
                    <input class="campo_field" type="text" placeholder="Colonia" name="colonia" required maxlength="50"
                        value="{{current_user.colonia}}">
                </div>

                <div class="campo">
                    <label class="campo_label" for="CP">Código Postal:</label>
                    <input class="campo_field" type="text" placeholder="Código Postal" name="codigoPostal" required
                        maxlength="5" value="{{current_user.codigoPostal}}" pattern="[0-9][0-9][0-9][0-9][0-9]">
                </div>

                <div class="campo">
                    <label class="campo_label" for="Estado">Estados</label>
                    <select class="campo_field" name="idEstado" id="est" required>
                        <option selected value="{{current_user.ciudades.estados.idEstado}}">{{current_user.ciudades.estados.nombre}}</option>
                        {% for edo in estados %}
                        {%if edo.idEstado!=current_user.ciudades.idEstado%}
                            <option value="{{edo.idEstado}}">{{edo.nombre}}</option>
                        {%endif%}
                        {% endfor %}
                    </select>
                </div>

                 <div class="campo">
                    <label class="campo_label" for="Ciudad">Ciudad</label>
                    <select class="campo_field" name="idCiudad" id="ciudades" required>
                        <option selected value="{{current_user.idCiudad}}">{{current_user.ciudades.nombre}}</option>
                    </select>
                </div>

            </div>
        </fieldset>

        <fieldset id="menu2" class="container tab-pane fade">
            <h4>Información escolar</h4>
            <div class="contenedor-campos">
                <div class="campo">
                    <label class="campo_label" for="escolaridad">Escolaridad:</label>
                    <select class="campo_field" name="escolaridad" required>


                        {%if current_user.escolaridad=='Secundaria'%}
                        <option selected value="{{current_user.escolaridad}}">{{current_user.escolaridad}}</option>
                        <option value="Preparatoria">Preparatoria</option>
                        <option value="Licenciatura">Licenciatura</option>
                        <option value="Maestría">Maestría</option>
                        <option value="Doctorado">Doctorado</option>
                        {%endif%}

                        {%if current_user.escolaridad=='Preparatoria'%}
                        <option selected value="{{current_user.escolaridad}}">{{current_user.escolaridad}}</option>
                        <option value="Secundaria">Secundaria</option>
                        <option value="Licenciatura">Licenciatura</option>
                        <option value="Maestría">Maestría</option>
                        <option value="Doctorado">Doctorado</option>
                        {%endif%}


                        {%if current_user.escolaridad=='Licenciatura'%}
                        <option selected value="{{current_user.escolaridad}}">{{current_user.escolaridad}}</option>
                        <option value="Secundaria">Secundaria</option>
                        <option value="Preparatoria">Preparatoria</option>
                        <option value="Maestría">Maestría</option>
                        <option value="Doctorado">Doctorado</option>
                        {%endif%}

                        {%if current_user.escolaridad=='Maestría'%}
                        <option selected value="{{current_user.escolaridad}}">{{current_user.escolaridad}}</option>
                        <option value="Secundaria">Secundaria</option>
                        <option value="Preparatoria">Preparatoria</option>
                        <option value="Licenciatura">Licenciatura</option>
                        <option value="Doctorado">Doctorado</option>
                        {%endif%}

                        {%if current_user.escolaridad=='Doctorado'%}
                        <option selected value="{{current_user.escolaridad}}">{{current_user.escolaridad}}</option>
                        <option value="Secundaria">Secundaria</option>
                        <option value="Preparatoria">Preparatoria</option>
                        <option value="Licenciatura">Licenciatura</option>
                        <option value="Maestría">Maestría</option>
                        {%endif%}




                    </select>
                </div>
                <div class="campo">
                    <label class="campo_label" for="especialidad">Especialidad</label>
                    <input class="campo_field" type="text" placeholder="Especialidad" name="especialidad" required
                        maxlength="100" value="{{current_user.especialidad}}">
                </div>
            </div>
        </fieldset>


        <fieldset id="menu3" class="container tab-pane fade">
            <h4>Información laboral</h4>
            <div class="contenedor-campos">

                <div class="campo">
                    <label class="campo_label" for="sucursal">Sucursal</label>
                    <select disabled class="campo_field" name="idSucursal" required>
                        <option selected value="{{current_user.idSucursal}}">{{current_user.sucursales.nombre}}</option>
                        {% for suc in sucursales %}
                        {%if suc.idSucursal!=current_user.idSucursal%}
                        <option value="{{suc.idSucursal}}">{{suc.nombre}} </option>
                        {%endif%}
                        {% endfor %}
                    </select>
                </div>

                <div class="campo">
                    <label class="campo_label" for="departamento">Departamento</label>
                    <select disabled class="campo_field" name="idDepartamento" required>
                        <option selected value="{{current_user.idDepartamento}}">{{current_user.departamentos.nombre}}
                        </option>
                        {% for dep in departamentos %}
                        {%if dep.idDepartamento!=current_user.idDepartamento%}
                        <option value="{{dep.idDepartamento}}">{{dep.nombre}} </option>
                        {%endif%}
                        {% endfor %}
                    </select>
                </div>

                <div class="campo">
                    <label class="campo_label" for="puesto">Puesto</label>
                    <select disabled class="campo_field" name="idPuesto" required>
                        <option selected value="{{current_user.idPuesto}}">{{current_user.puestos.nombre}}</option>
                        {% for p in puestos %}
                        {%if p.idPuesto!=current_user.idPuesto%}
                        <option value="{{p.idPuesto}}">{{p.nombre}} </option>
                        {%endif%}
                        {% endfor %}
                    </select>
                </div>

                <div class="campo">
                    <label class="campo_label" for="salarioDiario">Salario diario (MXN)</label>
                    <input class="campo_field" type="number" placeholder="Salario diario" name="salarioDiario" required
                        value="{{current_user.salarioDiario}}" disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="fechaContratacion">Fecha de contratación</label>
                    <input class="campo_field" type="date" placeholder="Fecha de Contratación" name="fechaContratacion"
                        required value="{{current_user.fechaContratacion}}" disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="turno">Turno</label>
                    <input class="campo_field" type="text" placeholder="Fecha de Contratación" name="turno" required
                        value="{{current_user.turnos.dias}} de {{current_user.turnos.horaInicio}} a {{current_user.turnos.horaFin}}"
                        disabled>

                </div>

                <div class="campo">
                    <label class="campo_label" for="nss">NSS</label>
                    <input class="campo_field" type="text" placeholder="NSS" name="nss" required maxlength="10"
                        value="{{current_user.nss}}" pattern="[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]"
                        disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="diasVacaciones">Días de vacaciones</label>
                    <input class="campo_field" type="number" placeholder="Días de vacaciones" name="diasVacaciones"
                        required min="1" value="{{current_user.diasVacaciones}}" disabled>
                </div>


                <div class="campo">
                    <label class="campo_label" for="diasPermiso">Días de permiso</label>
                    <input class="campo_field" type="number" placeholder="Días de permiso" name="diasPermiso" required
                        min="1" value="{{current_user.diasPermiso}}" disabled>
                </div>

                <div class="campo">
                    <label class="campo_label" for="tipo">Tipo de usuario:</label>
                    <select disabled class="campo_field" name="tipo" required>

                        <option selected value="{{current_user.tipo}}">{{current_user.tipo}}</option>
                        <option value="Staff">Staff</option>
                        <option value="Empleado">Empleado</option>

                    </select>
                </div>


                <div class="campo">
                    <label class="campo_label" for="nombre">Estatus:</label>
                    <select disabled class="campo_field" name="estatus" required>

                        {% if current_user.estatus=='A'%}
                        <option selected value="{{current_user.estatus}}">Activo</option>
                        <option value="I">Inactivo</option>
                        {%endif%}

                        {% if current_user.estatus=='I'%}
                        <option selected value="{{current_user.estatus}}">Inactivo</option>
                        <option value="A">Activo</option>


                        {%endif%}

                    </select>
                </div>

            </div>
        </fieldset>
        <div class="campo botones_previos">
            <button type="submit" class="botones_formularios botonUpdate">
                <img src="{{url_for('static', filename='imagenes/Actualizar.png')}}" alt="">
                Actualizar</button>
        </div>
    </div>



    <div id="notificaciones" class="validarAlerta"></div>
</form>
<!-- Modal imagen -->
<div class="modal fade" id="imagen">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h5 class="modal-title">Imagen de {{current_user.nombre}} <span>{{current_user.apellidoPaterno}}</span>
                    <span>{{current_user.apellidoMaterno}}</span>
                </h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <img src="/empleados/foto/{{current_user.idEmpleado}}" height="100%" width="100%">
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>

            </div>

        </div>
    </div>
</div>
{% if get_flashed_messages() %}
{% for m in get_flashed_messages() %}
<div class="alert alert-success alert-dismissible">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <strong>{{m}}</strong> .
</div>
{% endfor %}
{% endif%}

{% endblock %}